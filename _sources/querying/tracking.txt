Отслеживать или не отслеживать
==============================

Отслеживание поведения контролирует, будет ли Entity Framework Core хранить информацию об экземпляре объекта в его трекере изменения. Если сущность отслеживается, любые изменения, обнаруженные в сущности будут сохранены в базе данных во время ``SaveChanges()``.

.. contents:: `В этой статье:`
    :depth: 2
    :local:

.. include:: /_shared/sample.txt
.. _пример: https://github.com/aspnet/EntityFramework.Docs/tree/master/samples/Querying

Отслеживание запросов
---------------------

По умолчанию, запросы, возвращающие типы сущностей, отслеживаются. Это означает. что вы можете изменить эти экземпляры сущностей и получить эти изменения сохраненными в базе данных во время выполнения ``SaveChanges()``.

В следующем примере, изменения рейтинга блогов будет обнаружено и и сохранено в базе данных во время ``SaveChanges()``.

.. includesamplefile:: Querying/Querying/Tracking/Sample.cs
        :language: c#
        :lines: 10-15
        :dedent: 12
        :linenos:

Отключение отслеживания запросов
--------------------------------

Отключение отслеживания запросов полезно, когда результаты используются в сценарии "только для чтения". Они быстрее выполняются, потому что нет никакой необходимости настраивать отслеживание измененной информации.

Вы можете отключить отслеживание индивидуального запроса:

.. includesamplefile:: Querying/Querying/Tracking/Sample.cs
        :language: c#
        :lines: 17-22
        :emphasize-lines: 4
        :dedent: 12
        :linenos:

Вы также можете изменить поведение по умолчанию для отслеживания на уровне экземпляра контекста:

.. includesamplefile:: Querying/Querying/Tracking/Sample.cs
        :language: c#
        :lines: 24-29
        :emphasize-lines: 3
        :dedent: 12
        :linenos:

Отслеживание и прогнозы
-----------------------

Даже если тип результата запроса не является типом сущности, но результат содержит типы сущностей, то они по умолчанию все равно будут отслеживаться. В следующем запросе, возвращающем анонимный тип, в наборе результатов будут отслеживаться экземпляры ``Blog``.

.. includesamplefile:: Querying/Querying/Tracking/Sample.cs
        :language: c#
        :lines: 31-40
        :emphasize-lines: 7
        :dedent: 12
        :linenos:

Если результат не содержит каких-либо типов сущностей, то не выполняется никакого слежения. В следующем запросе, который возвращает анонимный тип с некоторыми значениями из сущности (но не экземпляр фактического типа сущности), никакого отслеживания не выполняется.

.. includesamplefile:: Querying/Querying/Tracking/Sample.cs
        :language: c#
        :lines: 42-51
        :dedent: 12
        :linenos:
